# 分布式事务
* XA协议(两阶段提交、三阶段提交)


- 可靠消息最终一致（异步确何型）
- TCC （两阶段型、补偿型）
- 最大努力通知（非可靠消息 、定期校对）





### XA协议



![](/assets/640.webp)












# 分布式可靠消息

![](/assets/hello.PNG)

有两个问题：1.消息状态确认 2.消息恢复
轮询从业务方读取状态并更新


![](/assets/shiwu.PNG)

我的文档：第40： 2017年7月最新微服务架构的分布式事务解决方案价值1399


# 分布式最大努力型
也就是将可靠消息的 （请求发送、确认发送、取消发送）部分 替换为 在业务处理服务的本地数据库消息表中，其他消息确认系统，和消息恢复（定时检查）不变