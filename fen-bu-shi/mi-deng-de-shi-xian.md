# 幂等
- 系统中有很多操作，是不管做多少次，都应该产生一样的效果或返回一样的结果

# 例如

- 前端重复提交选中的数据，应该后台只产生对应这个数据的一个反应结果。 
- 我们发起一笔付款请求，应该只扣用户账户一次钱，当遇到网络重发或系统bug重发，也应该只扣一次钱； 
- 发送消息，也应该只发一次，同样的短信发给用户，用户会哭的； 
- 创建业务订单，一次业务请求只能创建一个，创建多个就会出大问题

# 幂等的保证如下

- 查询
> 查询一次和查询多次，在数据不变的情况下，查询结果是一样的。select是天然的幂等操作 

2. 删除操作 
删除操作也是幂等的，删除一次和多次删除都是把数据删除。(注意可能返回结果不一样，删除的数据不存在，返回0，删除的数据多条，返回结果多个) 

3.唯一索引，防止新增脏数据 
比如：支付宝的资金账户，支付宝也有用户账户，每个用户只能有一个资金账户，怎么防止给用户创建资金账户多个，那么给资金账户表中的用户ID加唯一索引，所以一个用户新增成功一个资金账户记录 

要点： 
唯一索引或唯一组合索引来防止新增数据存在脏数据 
（当表存在唯一索引，并发时新增报错时，再查询一次就可以了，数据应该已经存在了，返回结果即可） 

4. token机制，防止页面重复提交 