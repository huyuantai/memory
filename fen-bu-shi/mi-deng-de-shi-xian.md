# 幂等
- 系统中有很多操作，是不管做多少次，都应该产生一样的效果或返回一样的结果

# 例如

- 前端重复提交选中的数据，应该后台只产生对应这个数据的一个反应结果。 
- 我们发起一笔付款请求，应该只扣用户账户一次钱，当遇到网络重发或系统bug重发，也应该只扣一次钱； 
- 发送消息，也应该只发一次，同样的短信发给用户，用户会哭的； 
- 创建业务订单，一次业务请求只能创建一个，创建多个就会出大问题

# 幂等的保证如下

- 查询
> 查询一次和查询多次，在数据不变的情况下，查询结果是一样的。select是天然的幂等操作 

- 删除
> 删除也是幂等的，删除一次和多次删除都是把数据删除

- 唯一索引，防止新增脏数据 
> 只能插入一条数据
  当表存在唯一索引，并发时新增报错时，再查询一次就可以了，数据应该已经存在了，返回结果即可

- token机制，防止页面重复提交，幂等 
> 处理流程： 
1. 数据提交前要向服务的申请token，token放到redis或jvm内存，token有效时间 
2. 提交后后台校验token，同时删除token，生成新的token返回 