分布式环境中通信存在三种状态：success failure timeout，超时是最麻烦的  
最基本要求：事务参与者要实现幂等性，简单的讲，就是多次提交依然能够达到同样的目的，数据状态的预期都是一致的  
怎么实现幂等性？说白了就是去重，可借助业务id来进行校验，可用的工具有redis、db

单点故障、超时、宕机、网络抖动、网络消息丢失、脑裂

数据不一致问题：

1.单机程序代码两个操作没锁，没有原子性

2.单机程序代码与组件 同步问题， 程序成功，组件不成功，数据不一致（日志、队列）

3.组件与组件的两个操作，如A：redis list pop，再B： redis list push，可能A成功了，宕机了造成数据不一致

4..分布式程序两个操作，A操作成功，B操作也成功，但是B网络抖动，返回失败（重试，幂等）


分布式中 A 调用 B，B返回失败，不能回滚A， 这时只能重试
因为可能B实际成功，但B因网络抖动等原因返回失败

譬如：
A 执行了，往B消息队列 发生消息，B返回失败，这时在A 这边的ack，nack 重发该消息

